<!--
<h2>고객센터 게시판</h2>
<a href="/board/new">[글쓰기]</a>
<ul>
  <% posts.forEach(post => { %>
    <li style="margin-left:<%= post.parent_id ? '30px' : '0' %>">
      <a href="/board/view/<%= post.id %>">
        <%= post.parent_id ? '[답글]' : '' %> <%= post.title %> - <%= post.author %>
      </a>
      (<a href="/board/edit/<%= post.id %>">수정</a> / <a href="/board/delete/<%= post.id %>">삭제</a>)
    </li>
  <% }) %>
</ul>
-->
<%- include('header.ejs', {title : '고객센터'})%>
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/stylesheets/board.css">
    <title>고객센터 게시판</title>
</head>
<body>

<section class="board-banner">
    <!-- 배경 이미지 -->
    <img src="/images/7.jpg" alt="배너 이미지" class="banner-img" />

    <!-- 오버레이: 제목 + 버튼 래퍼들 -->
    <div class="banner-overlay">
        <!-- ① 제목을 감싸는 래퍼 -->
        <div class="banner-title-wrap">
            <h2>고객센터 게시판</h2>
        </div>

        <!-- ② 버튼 그룹 래퍼: 하단으로 밀리도록 margin-top:auto 주기 -->
        <div class="banner-btn-wrap">
            <div class="banner-nav">
                <a href="/" class="banner-btn">홈</a>
                <a href="/board/new" class="banner-btn">글쓰기</a>
            </div>
        </div>
    </div>
</section>

<p style="text-align:right; margin-right:20px; font-weight: bold; font-size: 1.2em;">
    작성자:
    <% if (user) { %>
        <%= user.username %>
    <% } else { %>
        익명
    <% } %>
</p>

<main>
    <section class="accordion">
        <!-- FAQ Item 1 -->
        <div class="faq-item">
            <div class="faq-question">
                <span>> 🔔 [공지] 서비스 점검 안내 (6/10 02:00~04:00)</span>
            </div>
            <div class="faq-answer">
                <p>안녕하세요, 고객센터입니다. 6월 10일(화) 새벽 02시부터 04시까지 서비스 점검이 예정되어 있습니다. 이 시간 동안에는 일부 기능 이용이 제한될 수 있으니 양해 부탁드립니다.</p>
            </div>
        </div>

        <!-- FAQ Item 2 -->
        <div class="faq-item">
            <div class="faq-question">
                <span>> 🔔 [공지] 개인정보처리방침 변경 안내</span>
            </div>
            <div class="faq-answer">
                <p>안내드립니다. 개인정보처리방침이 2025년 6월 15일부터 개정 적용됩니다. 주요 변경사항은 수집 항목, 보유 기간, 파기 절차 등에 대한 상세 내용이며, 자세한 사항은 홈페이지 하단의 ‘개인정보처리방침’ 메뉴를 확인해 주세요.</p>
            </div>
        </div>
    </section>
    <ul>
        <% posts.forEach(post => { %>
            <li style="margin-left:<%= post.parent_id ? '30px' : '0' %>">
                <a href="/board/view/<%= post.id %>">
                    <%= post.parent_id ? '[답글]' : '' %> <%= post.title %> - <%= post.author %>
                </a>

                <% const isAuthor = user && user.username === post.author; %>
                <% const isAdmin = user && user.username === 'admin'; %>
                <% const isAnon = post.author === '익명'; %>

                (
                <% if (isAuthor) { %>
                    <a href="/board/edit/<%= post.id %>">수정</a>
                <% } else { %>
                    <span class="disabled">수정</span>
                <% } %>
                /
                <% if ((isAuthor) || (isAnon && isAdmin)) { %>
                    <a href="/board/delete/<%= post.id %>" onclick="return confirm('정말 삭제하시겠습니까?');">삭제</a>
                <% } else { %>
                    <span class="disabled">삭제</span>
                <%}%>
                )
            </li>
        <% }) %>
    </ul>
</main>
</body>
<%- include('footer.ejs')%>
<script>
    document.querySelectorAll('.faq-question').forEach(q => {
        q.addEventListener('click', () => {
            const item   = q.parentElement;
            const answer = q.nextElementSibling;
            const open   = item.classList.toggle('active');
            answer.style.display = open ? 'block' : 'none';
        });
    });
</script>
</html>
